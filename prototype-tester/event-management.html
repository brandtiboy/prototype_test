<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Event name — Overview</title>
  <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700&display=swap" rel="stylesheet" />
  <style>
    *, *::before, *::after { box-sizing: border-box; margin: 0; padding: 0; }

    body {
      font-family: 'Inter', -apple-system, BlinkMacSystemFont, sans-serif;
      background: #f5f6f7;
      min-height: 100vh;
      display: flex;
      padding-bottom: 70px; /* room for tester bar */
    }

    /* ─── SIDEBAR ──────────────────────────────────────────────────── */
    .sidebar {
      width: 260px;
      flex-shrink: 0;
      padding: 24px;
      position: sticky;
      top: 0;
      height: 100vh;
    }
    .sidebar-card {
      background: white;
      border-radius: 20px;
      padding: 28px 16px;
      height: 100%;
      box-shadow: 0 4px 40px rgba(0,0,0,.01);
      display: flex;
      flex-direction: column;
      gap: 10px;
    }
    .logo-wrap { padding: 0 12px; }
    .logo-icon {
      width: 48px; height: 48px;
      background: #022c12;
      border-radius: 9.2px;
      display: flex; align-items: center; justify-content: center;
    }
    .nav-list {
      flex: 1;
      display: flex;
      flex-direction: column;
      gap: 8px;
      padding-top: 40px;
    }
    .nav-item {
      display: flex; align-items: center; gap: 12px;
      padding: 14px 16px;
      border-radius: 10px;
      font-size: 16px; font-weight: 500; color: #0c0e0f;
      cursor: pointer;
      transition: background .12s;
    }
    .nav-item:hover { background: #f7f7f8; }
    .nav-item.active { background: #f7f7f8; }
    .nav-icon { width: 22px; height: 22px; flex-shrink: 0; color: #0c0e0f; }

    /* ─── MAIN ─────────────────────────────────────────────────────── */
    .main {
      flex: 1;
      min-width: 0;
      padding: 56px 40px 48px 16px;
      display: flex;
      flex-direction: column;
      gap: 32px;
    }

    /* ─── EVENT HEADER ─────────────────────────────────────────────── */
    .event-header { display: flex; flex-direction: column; gap: 24px; }

    .breadcrumb {
      display: flex; align-items: center; gap: 6px;
    }
    .back-btn {
      background: white;
      border: 1px solid rgba(0,0,0,.07);
      border-radius: 8px;
      padding: 5px;
      cursor: pointer;
      display: flex; align-items: center;
      transition: background .1s;
    }
    .back-btn:hover { background: #f4f4f4; }
    .breadcrumb-label { font-size: 16px; font-weight: 500; color: rgba(12,14,15,.8); }

    .event-title { font-size: 24px; font-weight: 600; color: #0c0e0f; }

    .event-meta { display: flex; gap: 20px; align-items: center; flex-wrap: wrap; }
    .meta-item {
      display: flex; align-items: center; gap: 8px;
      font-size: 16px; font-weight: 500; color: rgba(12,14,15,.8);
    }
    .meta-icon { width: 22px; height: 22px; flex-shrink: 0; }

    .header-actions {
      display: flex; align-items: center; justify-content: space-between; gap: 16px;
    }
    .status-group { display: flex; gap: 8px; align-items: center; }
    .badge {
      display: flex; align-items: center; gap: 8px;
      padding: 8px 16px; border-radius: 10px;
      font-size: 15px; font-weight: 500;
    }
    .badge-active { background: rgba(215,242,140,.45); color: #062f15; }
    .active-dot { width: 8px; height: 8px; border-radius: 50%; background: #5aab2d; flex-shrink: 0; }
    .badge-public { background: #efefef; color: #0c0e0f; }

    .action-group { display: flex; gap: 8px; align-items: center; }
    .action-btn {
      display: flex; align-items: center; gap: 9px;
      padding: 9px 16px 9px 13px;
      background: #efefef; border: none; border-radius: 10px;
      font-size: 15px; font-weight: 500; color: #0c0e0f;
      cursor: pointer; font-family: inherit;
      transition: background .1s;
    }
    .action-btn:hover { background: #e4e4e4; }
    .action-btn-sq {
      padding: 9px;
      background: #efefef; border: none; border-radius: 10px;
      cursor: pointer; display: flex; align-items: center;
      transition: background .1s;
    }
    .action-btn-sq:hover { background: #e4e4e4; }

    /* ─── STATS ────────────────────────────────────────────────────── */
    .stats-row { display: flex; gap: 16px; }
    .stat-card {
      flex: 1; background: white; border-radius: 10px; padding: 20px;
      display: flex; flex-direction: column; gap: 28px;
    }
    .stat-label { font-size: 17px; font-weight: 500; color: rgba(12,14,15,.6); line-height: 1.5; }
    .stat-bottom { display: flex; flex-direction: column; gap: 12px; }
    .stat-value { font-size: 36px; font-weight: 600; color: #0c0e0f; line-height: 1.4; }
    .stat-value sub { font-size: 22px; font-weight: 500; color: rgba(12,14,15,.5); vertical-align: baseline; }

    .info-chip {
      display: flex; align-items: center; justify-content: space-between;
      padding: 9px 14px 9px 16px; border-radius: 10px;
      font-size: 15px; font-weight: 500;
    }
    .chip-neutral { background: #f4f4f4; }
    .chip-neutral .chip-right { color: #062f15; }
    .chip-red { background: #fff9f9; color: #2f0606; }
    .chip-neutral .chip-left { color: #0c0e0f; }
    .chip-right-muted { color: rgba(12,14,15,.65); }

    /* ─── PARTICIPANTS TABLE ────────────────────────────────────────── */
    .participants-panel {
      background: white; border-radius: 10px; padding: 20px;
      display: flex; flex-direction: column; gap: 24px;
    }
    .panel-header {
      display: flex; align-items: center; justify-content: space-between;
    }
    .panel-title { font-size: 17px; font-weight: 500; color: rgba(12,14,15,.6); }

    .add-participant-btn {
      display: flex; align-items: center; gap: 8px;
      padding: 9px 18px 9px 14px;
      background: #022c12; color: white; border: none; border-radius: 10px;
      font-size: 14px; font-weight: 600; cursor: pointer; font-family: inherit;
      transition: background .15s;
    }
    .add-participant-btn:hover { background: #034d1e; }

    .table-wrap { display: flex; flex-direction: column; gap: 8px; }

    .table-head {
      display: grid;
      grid-template-columns: 200px 170px 155px 140px 1fr;
      gap: 16px;
      padding: 0 16px;
      font-size: 15px; font-weight: 500; color: rgba(12,14,15,.55);
    }
    .table-row {
      display: grid;
      grid-template-columns: 200px 170px 155px 140px 1fr;
      gap: 16px;
      align-items: center;
      padding: 10px 16px;
      background: #f9f9f9;
      border-radius: 10px;
      font-size: 15px; font-weight: 500; color: #0c0e0f;
      transition: background .1s;
    }
    .table-row:hover { background: #f3f3f3; }
    .table-row.is-canceled { opacity: .5; }
    .table-row.is-canceled .cell-name,
    .table-row.is-canceled .cell-amount { text-decoration: line-through; }

    .table-row.row-new {
      animation: rowIn .25s ease;
    }
    @keyframes rowIn {
      from { opacity: 0; transform: translateY(-6px); }
      to   { opacity: 1; transform: translateY(0); }
    }

    .status-pill {
      display: inline-flex; align-items: center;
      padding: 6px 14px; border-radius: 10px;
      font-size: 14px; font-weight: 500;
    }
    .pill-paid      { background: rgba(215,242,140,.45); color: #062f15; }
    .pill-notpaid   { background: rgba(242,140,140,.15); color: #2f0606; }
    .pill-confirmed { background: #eaf6c8; color: #062f15; }
    .pill-pending   { background: #fff8e1; color: #7a4a00; }
    .pill-canceled  { background: rgba(242,140,140,.15); color: #2f0606; }

    .email-cell { display: flex; align-items: center; gap: 6px; }
    .msg-btn {
      background: white; border: 1px solid rgba(0,0,0,.07); border-radius: 8px;
      padding: 4px; cursor: pointer; display: flex; align-items: center;
      transition: background .1s; flex-shrink: 0;
    }
    .msg-btn:hover { background: #f4f4f4; }

    /* ─── ADD PARTICIPANT MODAL ─────────────────────────────────────── */
    .modal-overlay {
      position: fixed; inset: 0;
      background: rgba(0,0,0,.38);
      backdrop-filter: blur(5px);
      z-index: 9000;
      display: flex; align-items: center; justify-content: center;
      opacity: 0; pointer-events: none;
      transition: opacity .2s;
    }
    .modal-overlay.open { opacity: 1; pointer-events: all; }

    .modal-card {
      background: white; border-radius: 20px; padding: 32px;
      width: 500px; max-width: calc(100vw - 32px);
      box-shadow: 0 20px 60px rgba(0,0,0,.14);
      transform: scale(.96) translateY(10px);
      transition: transform .2s;
    }
    .modal-overlay.open .modal-card { transform: scale(1) translateY(0); }

    .modal-title { font-size: 20px; font-weight: 600; color: #0c0e0f; margin-bottom: 24px; }

    .form-row { display: flex; gap: 12px; }
    .form-row .form-group { flex: 1; }
    .form-group { margin-bottom: 16px; }
    .form-label { display: block; font-size: 13px; font-weight: 600; color: #374151; margin-bottom: 6px; }
    .form-input, .form-select {
      width: 100%; border: 1.5px solid #e5e7eb; border-radius: 10px;
      padding: 10px 13px; font-size: 14px; color: #0c0e0f;
      font-family: inherit; outline: none; background: #fafafa;
      transition: border-color .15s;
      appearance: none;
    }
    .form-input:focus, .form-select:focus { border-color: #022c12; background: white; }
    .form-input.error { border-color: #ef4444; }

    .select-wrap { position: relative; }
    .select-wrap::after {
      content: '';
      position: absolute; right: 13px; top: 50%;
      transform: translateY(-50%);
      border: 5px solid transparent;
      border-top-color: #6b7280;
      pointer-events: none;
    }

    .modal-footer { display: flex; gap: 10px; justify-content: flex-end; margin-top: 8px; }
    .btn-cancel {
      padding: 10px 20px; background: #f0f0f0; color: #0c0e0f;
      border: none; border-radius: 10px;
      font-size: 14px; font-weight: 600; cursor: pointer; font-family: inherit;
      transition: background .1s;
    }
    .btn-cancel:hover { background: #e5e5e5; }
    .btn-submit {
      padding: 10px 20px; background: #022c12; color: white;
      border: none; border-radius: 10px;
      font-size: 14px; font-weight: 600; cursor: pointer; font-family: inherit;
      transition: background .15s;
    }
    .btn-submit:hover { background: #034d1e; }

    /* ─── TOAST ────────────────────────────────────────────────────── */
    .toast {
      position: fixed; bottom: 80px; left: 50%;
      transform: translateX(-50%) translateY(8px);
      background: #022c12; color: white; border-radius: 10px;
      padding: 10px 20px; font-size: 14px; font-weight: 500;
      opacity: 0; transition: opacity .2s, transform .2s;
      z-index: 9500; pointer-events: none; white-space: nowrap;
    }
    .toast.show { opacity: 1; transform: translateX(-50%) translateY(0); }
  </style>
</head>
<body>

<!-- ════════════════════════════════════════════════ SIDEBAR -->
<aside class="sidebar">
  <div class="sidebar-card">
    <div class="logo-wrap">
      <div class="logo-icon">
        <!-- U-shape logo to match Figma mark -->
        <svg width="15" height="22" viewBox="0 0 15 22" fill="none">
          <path d="M1.5 1v12a6 6 0 0012 0V1" stroke="white" stroke-width="2.5" stroke-linecap="round" stroke-linejoin="round"/>
        </svg>
      </div>
    </div>
    <nav class="nav-list">
      <div class="nav-item active">
        <svg class="nav-icon" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round">
          <path d="M3 10.182L12 3l9 7.182V20a1 1 0 01-1 1H4a1 1 0 01-1-1v-9.818z"/>
          <path d="M9 21v-9h6v9"/>
        </svg>
        Home
      </div>
      <div class="nav-item">
        <svg class="nav-icon" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round">
          <rect x="3" y="4" width="18" height="18" rx="2"/>
          <path d="M16 2v4M8 2v4M3 10h18"/>
        </svg>
        Calendar
      </div>
      <div class="nav-item">
        <svg class="nav-icon" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round">
          <path d="M12 2C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2z"/>
          <path d="M12 6v6l4 2"/>
        </svg>
        Experiences
      </div>
      <div class="nav-item">
        <svg class="nav-icon" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round">
          <path d="M12 2l3.09 6.26L22 9.27l-5 4.87 1.18 6.88L12 17.77l-6.18 3.25L7 14.14 2 9.27l6.91-1.01L12 2z"/>
        </svg>
        Sales
      </div>
      <div class="nav-item">
        <svg class="nav-icon" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round">
          <path d="M3 9l9-7 9 7v11a2 2 0 01-2 2H5a2 2 0 01-2-2V9z"/>
          <path d="M9 22V12h6v10"/>
        </svg>
        Storefront
      </div>
      <div class="nav-item">
        <svg class="nav-icon" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round">
          <polyline points="22 12 18 12 15 21 9 3 6 12 2 12"/>
        </svg>
        Grow
      </div>
    </nav>
  </div>
</aside>

<!-- ════════════════════════════════════════════════ MAIN -->
<main class="main">

  <!-- EVENT HEADER -->
  <div class="event-header">

    <!-- Breadcrumb + title + meta -->
    <div style="display:flex;flex-direction:column;gap:24px">
      <div class="breadcrumb">
        <button class="back-btn">
          <svg width="16" height="16" viewBox="0 0 16 16" fill="none" stroke="#0c0e0f" stroke-width="1.6" stroke-linecap="round" stroke-linejoin="round">
            <path d="M10 3.5L5.5 8l4.5 4.5"/>
          </svg>
        </button>
        <span class="breadcrumb-label">Overview</span>
      </div>

      <div style="display:flex;flex-direction:column;gap:18px">
        <h1 class="event-title">Event name</h1>
        <div class="event-meta">
          <div class="meta-item">
            <svg class="meta-icon" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round">
              <circle cx="12" cy="12" r="9"/><path d="M12 7v5l3 3"/>
            </svg>
            January 17th, 2026
          </div>
          <div class="meta-item">
            <svg class="meta-icon" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round">
              <circle cx="12" cy="12" r="9"/><path d="M12 7v5l3 3"/>
            </svg>
            10:00 – 11:00
          </div>
          <div class="meta-item">
            <svg class="meta-icon" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round">
              <path d="M12 2C8.13 2 5 5.13 5 9c0 5.25 7 13 7 13s7-7.75 7-13c0-3.87-3.13-7-7-7z"/>
              <circle cx="12" cy="9" r="2.5"/>
            </svg>
            Aarhus, Denmark
          </div>
        </div>
      </div>
    </div>

    <!-- Status + actions row -->
    <div class="header-actions">
      <div class="status-group">
        <div class="badge badge-active">
          <div class="active-dot"></div>
          Active
        </div>
        <div class="badge badge-public">Public</div>
      </div>
      <div class="action-group">
        <button class="action-btn">
          <svg width="22" height="22" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round">
            <path d="M4 4h16c1.1 0 2 .9 2 2v12c0 1.1-.9 2-2 2H4c-1.1 0-2-.9-2-2V6c0-1.1.9-2 2-2z"/>
            <polyline points="22,6 12,13 2,6"/>
          </svg>
          Message participants
        </button>
        <button class="action-btn">
          <svg width="22" height="22" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round">
            <path d="M11 4H4a2 2 0 00-2 2v14a2 2 0 002 2h14a2 2 0 002-2v-7"/>
            <path d="M18.5 2.5a2.121 2.121 0 013 3L12 15l-4 1 1-4 9.5-9.5z"/>
          </svg>
          Edit event
        </button>
        <button class="action-btn-sq">
          <svg width="22" height="22" viewBox="0 0 24 24" fill="none" stroke="#0c0e0f" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round">
            <circle cx="12" cy="12" r="3"/>
            <path d="M19.4 15a1.65 1.65 0 00.33 1.82l.06.06a2 2 0 010 2.83 2 2 0 01-2.83 0l-.06-.06a1.65 1.65 0 00-1.82-.33 1.65 1.65 0 00-1 1.51V21a2 2 0 01-4 0v-.09A1.65 1.65 0 009 19.4a1.65 1.65 0 00-1.82.33l-.06.06a2 2 0 01-2.83-2.83l.06-.06A1.65 1.65 0 004.68 15a1.65 1.65 0 00-1.51-1H3a2 2 0 010-4h.09A1.65 1.65 0 004.6 9a1.65 1.65 0 00-.33-1.82l-.06-.06a2 2 0 012.83-2.83l.06.06A1.65 1.65 0 009 4.68a1.65 1.65 0 001-1.51V3a2 2 0 014 0v.09a1.65 1.65 0 001 1.51 1.65 1.65 0 001.82-.33l.06-.06a2 2 0 012.83 2.83l-.06.06A1.65 1.65 0 0019.4 9a1.65 1.65 0 001.51 1H21a2 2 0 010 4h-.09a1.65 1.65 0 00-1.51 1z"/>
          </svg>
        </button>
      </div>
    </div>
  </div>

  <!-- STATS + TABLE SECTION -->
  <div style="display:flex;flex-direction:column;gap:16px">

    <!-- Stats row -->
    <div class="stats-row">
      <div class="stat-card">
        <div class="stat-label">Participants booked</div>
        <div class="stat-bottom">
          <div class="stat-value" id="stat-booked">18<sub>/20</sub></div>
          <div class="info-chip chip-neutral">
            <span class="chip-left">Adults</span>
            <span class="chip-right" id="stat-available">2 available</span>
          </div>
        </div>
      </div>

      <div class="stat-card">
        <div class="stat-label">Tickets paid</div>
        <div class="stat-bottom">
          <div class="stat-value" id="stat-paid">15</div>
          <div class="info-chip chip-red">
            <span>Not paid</span>
            <span id="stat-notpaid">3</span>
          </div>
        </div>
      </div>

      <div class="stat-card">
        <div class="stat-label">Resources needed</div>
        <div class="stat-bottom">
          <div class="info-chip chip-neutral">
            <span class="chip-left">iPad</span>
            <span class="chip-right-muted">1 per participant</span>
          </div>
        </div>
      </div>
    </div>

    <!-- Participants table -->
    <div class="participants-panel">
      <div class="panel-header">
        <span class="panel-title">Participants</span>
        <button class="add-participant-btn" id="add-btn" onclick="openModal()">
          <svg width="15" height="15" viewBox="0 0 15 15" fill="none" stroke="white" stroke-width="2" stroke-linecap="round">
            <line x1="7.5" y1="1" x2="7.5" y2="14"/>
            <line x1="1" y1="7.5" x2="14" y2="7.5"/>
          </svg>
          Add participant
        </button>
      </div>

      <div class="table-wrap">
        <!-- Header -->
        <div class="table-head">
          <span>Name</span>
          <span>Participants amount</span>
          <span>Payment status</span>
          <span>Booking status</span>
          <span>Email</span>
        </div>

        <!-- Rows -->
        <div id="participant-rows">

          <div class="table-row">
            <span class="cell-name">John Doe</span>
            <span class="cell-amount">5</span>
            <span><span class="status-pill pill-paid">Paid</span></span>
            <span><span class="status-pill pill-confirmed">Confirmed</span></span>
            <span class="email-cell">john@doe.com
              <button class="msg-btn"><svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="#0c0e0f" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round"><path d="M4 4h16c1.1 0 2 .9 2 2v12c0 1.1-.9 2-2 2H4c-1.1 0-2-.9-2-2V6c0-1.1.9-2 2-2z"/><polyline points="22,6 12,13 2,6"/></svg></button>
            </span>
          </div>

          <div class="table-row">
            <span class="cell-name">Alex Turner</span>
            <span class="cell-amount">3</span>
            <span><span class="status-pill pill-notpaid">Not paid</span></span>
            <span><span class="status-pill pill-confirmed">Confirmed</span></span>
            <span class="email-cell">alexturner@email.com
              <button class="msg-btn"><svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="#0c0e0f" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round"><path d="M4 4h16c1.1 0 2 .9 2 2v12c0 1.1-.9 2-2 2H4c-1.1 0-2-.9-2-2V6c0-1.1.9-2 2-2z"/><polyline points="22,6 12,13 2,6"/></svg></button>
            </span>
          </div>

          <div class="table-row">
            <span class="cell-name">Jamie Rivers</span>
            <span class="cell-amount">9</span>
            <span><span class="status-pill pill-paid">Paid</span></span>
            <span><span class="status-pill pill-confirmed">Confirmed</span></span>
            <span class="email-cell">jamieri@email.com
              <button class="msg-btn"><svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="#0c0e0f" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round"><path d="M4 4h16c1.1 0 2 .9 2 2v12c0 1.1-.9 2-2 2H4c-1.1 0-2-.9-2-2V6c0-1.1.9-2 2-2z"/><polyline points="22,6 12,13 2,6"/></svg></button>
            </span>
          </div>

          <div class="table-row">
            <span class="cell-name">Sophie Mercer</span>
            <span class="cell-amount">1</span>
            <span><span class="status-pill pill-paid">Paid</span></span>
            <span><span class="status-pill pill-confirmed">Confirmed</span></span>
            <span class="email-cell">so_mercer@email.com
              <button class="msg-btn"><svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="#0c0e0f" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round"><path d="M4 4h16c1.1 0 2 .9 2 2v12c0 1.1-.9 2-2 2H4c-1.1 0-2-.9-2-2V6c0-1.1.9-2 2-2z"/><polyline points="22,6 12,13 2,6"/></svg></button>
            </span>
          </div>

          <div class="table-row is-canceled">
            <span class="cell-name">Emma Johnson</span>
            <span class="cell-amount">5</span>
            <span><span class="status-pill pill-notpaid">Not paid</span></span>
            <span><span class="status-pill pill-canceled">Canceled</span></span>
            <span class="email-cell">emma11@email.com
              <button class="msg-btn"><svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="#0c0e0f" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round"><path d="M4 4h16c1.1 0 2 .9 2 2v12c0 1.1-.9 2-2 2H4c-1.1 0-2-.9-2-2V6c0-1.1.9-2 2-2z"/><polyline points="22,6 12,13 2,6"/></svg></button>
            </span>
          </div>

          <div class="table-row is-canceled">
            <span class="cell-name">Lena Bauer</span>
            <span class="cell-amount">5</span>
            <span><span class="status-pill pill-notpaid">Not paid</span></span>
            <span><span class="status-pill pill-canceled">Canceled</span></span>
            <span class="email-cell">lena.b@email.com
              <button class="msg-btn"><svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="#0c0e0f" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round"><path d="M4 4h16c1.1 0 2 .9 2 2v12c0 1.1-.9 2-2 2H4c-1.1 0-2-.9-2-2V6c0-1.1.9-2 2-2z"/><polyline points="22,6 12,13 2,6"/></svg></button>
            </span>
          </div>

        </div><!-- /participant-rows -->
      </div>
    </div>
  </div>

</main>

<!-- ════════════════════════════════════════════════ ADD PARTICIPANT MODAL -->
<div class="modal-overlay" id="modal" onclick="handleBackdrop(event)">
  <div class="modal-card">
    <div class="modal-title">Add participant</div>

    <div class="form-row">
      <div class="form-group">
        <label class="form-label">Full name</label>
        <input class="form-input" id="f-name" type="text" placeholder="e.g. Sarah Lund" autocomplete="off" />
      </div>
      <div class="form-group">
        <label class="form-label">Email</label>
        <input class="form-input" id="f-email" type="email" placeholder="sarah@example.com" autocomplete="off" />
      </div>
    </div>

    <div class="form-row">
      <div class="form-group">
        <label class="form-label">Number of participants</label>
        <input class="form-input" id="f-amount" type="number" min="1" max="20" placeholder="1" />
      </div>
      <div class="form-group">
        <label class="form-label">Payment status</label>
        <div class="select-wrap">
          <select class="form-select" id="f-payment">
            <option value="paid">Paid</option>
            <option value="notpaid">Not paid</option>
          </select>
        </div>
      </div>
    </div>

    <div class="form-group">
      <label class="form-label">Booking status</label>
      <div class="select-wrap">
        <select class="form-select" id="f-booking">
          <option value="confirmed">Confirmed</option>
          <option value="pending">Pending</option>
          <option value="canceled">Canceled</option>
        </select>
      </div>
    </div>

    <div class="modal-footer">
      <button class="btn-cancel" onclick="closeModal()">Cancel</button>
      <button class="btn-submit" onclick="submitParticipant()">Add participant</button>
    </div>
  </div>
</div>

<!-- ════════════════════════════════════════════════ TOAST -->
<div class="toast" id="toast"></div>

<!-- ════════════════════════════════════════════════ PROTOTYPE JS -->
<script>
  const MAX_CAPACITY = 20;
  let bookedCount  = 18;
  let paidCount    = 15;
  let notPaidCount = 3;

  function openModal() {
    document.getElementById('modal').classList.add('open');
    setTimeout(() => document.getElementById('f-name').focus(), 60);
  }
  function closeModal() {
    document.getElementById('modal').classList.remove('open');
    ['f-name','f-email','f-amount'].forEach(id => document.getElementById(id).value = '');
    document.getElementById('f-payment').value = 'paid';
    document.getElementById('f-booking').value = 'confirmed';
    document.querySelectorAll('.form-input.error').forEach(el => el.classList.remove('error'));
  }
  function handleBackdrop(e) {
    if (e.target === document.getElementById('modal')) closeModal();
  }

  function submitParticipant() {
    const nameEl   = document.getElementById('f-name');
    const emailEl  = document.getElementById('f-email');
    const name     = nameEl.value.trim();
    const email    = emailEl.value.trim();
    const amount   = Math.max(1, parseInt(document.getElementById('f-amount').value) || 1);
    const payment  = document.getElementById('f-payment').value;
    const booking  = document.getElementById('f-booking').value;

    let valid = true;
    if (!name)  { nameEl.classList.add('error');  nameEl.focus();  valid = false; }
    if (!email) { emailEl.classList.add('error'); if (valid) emailEl.focus(); valid = false; }
    if (!valid) return;

    // Build pills
    const payPill  = payment === 'paid'
      ? `<span class="status-pill pill-paid">Paid</span>`
      : `<span class="status-pill pill-notpaid">Not paid</span>`;

    const bookPill = booking === 'confirmed'
      ? `<span class="status-pill pill-confirmed">Confirmed</span>`
      : booking === 'pending'
      ? `<span class="status-pill pill-pending">Pending</span>`
      : `<span class="status-pill pill-canceled">Canceled</span>`;

    const msgIcon = `<svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="#0c0e0f" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round"><path d="M4 4h16c1.1 0 2 .9 2 2v12c0 1.1-.9 2-2 2H4c-1.1 0-2-.9-2-2V6c0-1.1.9-2 2-2z"/><polyline points="22,6 12,13 2,6"/></svg>`;

    const row = document.createElement('div');
    row.className = 'table-row row-new' + (booking === 'canceled' ? ' is-canceled' : '');
    row.innerHTML = `
      <span class="cell-name">${escHtml(name)}</span>
      <span class="cell-amount">${amount}</span>
      <span>${payPill}</span>
      <span>${bookPill}</span>
      <span class="email-cell">${escHtml(email)}
        <button class="msg-btn">${msgIcon}</button>
      </span>
    `;

    // Insert before canceled rows
    const rows      = document.getElementById('participant-rows');
    const canceled  = rows.querySelectorAll('.is-canceled');
    canceled.length ? rows.insertBefore(row, canceled[0]) : rows.appendChild(row);

    // Update stats
    if (booking !== 'canceled') {
      bookedCount = Math.min(bookedCount + amount, MAX_CAPACITY);
      const avail = Math.max(MAX_CAPACITY - bookedCount, 0);
      document.getElementById('stat-booked').innerHTML = `${bookedCount}<sub>/${MAX_CAPACITY}</sub>`;
      document.getElementById('stat-available').textContent =
        avail === 1 ? '1 available' : `${avail} available`;
      if (payment === 'paid') {
        paidCount++;
        document.getElementById('stat-paid').textContent = paidCount;
      } else {
        notPaidCount++;
        document.getElementById('stat-notpaid').textContent = notPaidCount;
      }
    }

    closeModal();
    showToast(`${name} added as participant`);

    // Signal to PrototypeTester that the "add participant" goal was achieved
    document.dispatchEvent(new CustomEvent('participant-added'));
  }

  function escHtml(str) {
    return str.replace(/&/g,'&amp;').replace(/</g,'&lt;').replace(/>/g,'&gt;').replace(/"/g,'&quot;');
  }

  let _toastTimer;
  function showToast(msg) {
    const el = document.getElementById('toast');
    el.textContent = msg;
    el.classList.add('show');
    clearTimeout(_toastTimer);
    _toastTimer = setTimeout(() => el.classList.remove('show'), 2600);
  }

  document.addEventListener('keydown', e => {
    if (e.key === 'Escape') closeModal();
    if (e.key === 'Enter' && document.getElementById('modal').classList.contains('open')) {
      submitParticipant();
    }
  });
</script>

<!-- ════════════════════════════════════════════════ PROTOTYPE TESTER -->
<script src="prototype-tester.js"></script>
<script>
  PrototypeTester.init({
    projectName:       'Event Management — Participant Flow',
    primaryColor:      '#022c12',
    collectTesterInfo: true,
    allowSkip:         true,

    // ── Supabase (recommended) ──────────────────────────────────────────────
    // Paste your Supabase project URL and anon key here.
    // Get them from: Supabase Dashboard → Settings → API
    supabaseUrl:     'YOUR_SUPABASE_URL',      // e.g. https://xxxx.supabase.co
    supabaseAnonKey: 'YOUR_SUPABASE_ANON_KEY', // starts with eyJ...
    downloadResults: false,    // results go to Supabase instead of a JSON file

    // ── Alternative: Google Sheets ──────────────────────────────────────────
    // webhookUrl: 'YOUR_GOOGLE_SHEETS_WEBHOOK_URL',

    tasks: [
      {
        // Recall task: tester gets 5s to look at the page, then must answer from memory.
        type:         'recall',
        id:           'check-capacity',
        title:        'How many spots are left?',
        description:  'Take a look at this event overview.',
        question:     'How many spots are still available for this event?',
        lookDuration: 5000,           // 5 seconds to look
        correctAnswer: '2',           // used to show correct/incorrect feedback
        options: ['1', '2', '3', '4', '5 or more'],  // multiple choice
      },
      {
        // goalEvent → success dialog fires automatically when participant is submitted.
        id:          'add-participant',
        title:       'Add a participant',
        description: 'A new booking just came in from Sarah Lund (sarah@lund.dk, 1 person, paid & confirmed). Add her to the event.',
        hint:        'Look for an "Add participant" button near the participant list.',
        goalEvent:   'participant-added',
      },
    ],
  });
</script>

</body>
</html>
